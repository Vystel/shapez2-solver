<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shapez 2 Solver</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="sidebar">
        <h1>Shapez 2 Solver</h1>

        <div style="width: 100%; height: 1px; background-color: gray; margin: 20px 0;"></div>
        
        <h2>Target Shape</h2>
        <p>The shape you want to make. Preventing waste means all final shapes must be the target shape.</p>
        <div id="input-button-container">
            <input type="text" id="target-shape" placeholder="Shape Code">
            <button id="calculate-btn">Solve</button>
        </div>
        <div class="settings-container">
            <div class="setting">
                <label for="max-depth">Max Depth:</label>
                <input type="number" id="max-depth" value="8" min="1" max="20">
            </div>
            <div class="setting">
                <label for="max-states-per-level">Max States Per Level:</label>
                <input type="number" id="max-states-per-level" value="1000" min="100" max="10000" step="100">
            </div>
            <label><input type="checkbox" class="operation-toggle" id="prevent-waste-checkbox" /> Prevent Waste</label>
        </div>

        <div style="width: 100%; height: 1px; background-color: gray; margin: 20px 0;"></div>
        
        <h2>Starting Shapes</h2>
        <p>Shapes that are used to construct the target shape through a series of operations.</p>
        <div id="input-button-container">
            <input type="text" id="new-shape-input" placeholder="Shape Code">
            <button id="add-shape-btn">+</button>
        </div>
        <div id="starting-shapes">
            <!-- Starting shapes will be populated by JavaScript -->
        </div>
        <button id="extract-shapes-btn" class="bigButton">Auto</button>

        <div style="width: 100%; height: 1px; background-color: gray; margin: 20px 0;"></div>

        <h2>Enabled Operations</h2>
        <p>Operations allowed for use. Disable redundant operations for quicker processing!</p>
        <div id="operation-checkboxes">
            <label><input type="checkbox" class="operation-toggle" value="halfDestroyer" checked> Half Cutter</label><br>
            <label><input type="checkbox" class="operation-toggle" value="cutter" checked> Cutter</label><br>
            <label><input type="checkbox" class="operation-toggle" value="swapper" checked> Swapper</label><br>
            <label><input type="checkbox" class="operation-toggle" value="rotateCW" checked> Rotate CW</label><br>
            <label><input type="checkbox" class="operation-toggle" value="rotateCCW" checked> Rotate CCW</label><br>
            <label><input type="checkbox" class="operation-toggle" value="rotate180" checked> Rotate 180</label><br>
            <label><input type="checkbox" class="operation-toggle" value="stacker" checked> Stacker</label><br>
            <label><input type="checkbox" class="operation-toggle" value="painter" checked> Painter</label><br>
            <label><input type="checkbox" class="operation-toggle" value="pinPusher" checked> Pin Pusher</label><br>
            <label><input type="checkbox" class="operation-toggle" value="crystalGenerator" checked> Crystal Generator</label><br>
        </div>
    </div>
    
    <div id="main">
        <h2>Solution</h2>
        <div id="progress">
            <p>Status: <span id="status-msg">Idle</span></p>
        </div>
        <div id="graph-container"></div>
        <div id="output"></div>
    </div>

    <script src="https://unpkg.com/cytoscape@3.29.2/dist/cytoscape.min.js"></script>
    <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
    <script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>
    <script>
        cytoscape.use(cytoscapeDagre);
    </script>
    <script type="module" src="script.js"></script>
</body>
</html>
